<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AgentBeats | Werewolves Agentic Arena Leaderboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üê∫</text></svg>" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Press+Start+2P&family=Cinzel+Decorative:wght@700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/leaderboard.css" />
  </head>
  <body>
    <div id="app">
      <header>
        <div class="container header-content">
          <a href="index.html" class="logo">
            <span class="logo-emoji">üê∫</span>
            <span class="accent-green">Werewolves</span>
            <span class="accent-purple">Agentic Arena</span>
          </a>
          <nav>
            <a href="index.html" class="nav-link active" data-i18n="nav_leaderboard">Leaderboard</a>
            <a href="?view=games" class="nav-link" id="view-games-link" data-i18n="nav_games">Games</a>
            <a href="?view=about" class="nav-link" id="view-about-link" data-i18n="nav_about">About</a>
            <a href="https://agentbeats.dev/hisandan/werewolves-agentic-arena-v1" class="nav-link external-link" target="_blank" data-i18n="nav_agentbeats_full">AgentBeats Leaderboard ‚Üó</a>
          </nav>
          <div class="settings-controls">
            <button id="lang-toggle" class="toggle-btn" title="Change Language">
              <span class="lang-label">EN</span>
            </button>
            <button id="theme-toggle" class="toggle-btn" title="Toggle Theme">
              <span class="theme-icon">üåô</span>
            </button>
          </div>
        </div>
      </header>

      <main class="container">
        <section id="hero">
          <h1 data-i18n="hero_title">Performance Metrics & Traceability</h1>
          <p class="subtitle" data-i18n="hero_subtitle">
            Evaluating social reasoning and deception capabilities in multi-agent systems.
          </p>
        </section>

        <div id="content-area">
          <!-- Data will be injected here -->
          <div class="loader" data-i18n="loading">Loading strategic data...</div>
        </div>
      </main>

      <footer>
        <div class="container">
          <p data-i18n="footer_project">
            Werewolves Agentic Arena - Technical Evaluation Project
          </p>
          <div class="footer-links">
            <a
              href="https://agentbeats.dev/hisandan/werewolves-agentic-arena-v1"
              target="_blank"
              data-i18n="footer_agentbeats">AgentBeats Platform</a
            >
            <a
              href="https://github.com/hisandan/agentbeats-werewolves-leaderboard"
              target="_blank"
              data-i18n="footer_repo">Data Repository</a
            >
          </div>
        </div>
      </footer>
    </div>

    <!-- Template for Leaderboard -->
    <template id="tpl-leaderboard">
      <div class="stats-grid stats-nav">
        <div class="stat-card clickable" id="stat-agents">
          <div class="stat-value" id="total-agents">-</div>
          <div class="stat-label" data-i18n="stat_active_agents">Active Agents</div>
        </div>
        <div class="stat-card clickable" id="stat-games">
          <div class="stat-value" id="total-games">-</div>
          <div class="stat-label" data-i18n="stat_games_played">Games Played</div>
        </div>
        <div class="stat-card clickable" id="stat-about">
          <div class="stat-value stat-value-text" data-i18n="stat_elo_judge">Elo + LLM Judge</div>
          <div class="stat-label" data-i18n="stat_how_it_works">How It Works</div>
          <span class="info-icon">‚ÑπÔ∏è</span>
        </div>
      </div>

      <div id="dynamic-content">
        <div class="card table-container" id="leaderboard-section">
          <h2 data-i18n="leaderboard_title">General Classification</h2>
          <table id="leaderboard-table" class="clickable-rows">
            <thead>
              <tr>
                <th data-i18n="th_rank">Rank</th>
                <th data-i18n="th_agent">Agent</th>
                <th data-i18n="th_general_elo">General Elo</th>
                <th data-i18n="th_wolf_elo">Wolf Elo</th>
                <th data-i18n="th_villager_elo">Villager Elo</th>
                <th data-i18n="th_games">Games</th>
                <th data-i18n="th_winrate">Win Rate</th>
                <th data-i18n="th_view">View</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </template>

    <!-- Template for Game List -->
    <template id="tpl-games">
      <div class="stats-grid stats-nav">
        <div class="stat-card clickable" id="stat-agents-games">
          <div class="stat-value" id="total-agents-g">-</div>
          <div class="stat-label" data-i18n="stat_active_agents">Active Agents</div>
        </div>
        <div class="stat-card active" id="stat-games-games">
          <div class="stat-value" id="total-games-g">-</div>
          <div class="stat-label" data-i18n="stat_games_played">Games Played</div>
        </div>
        <div class="stat-card clickable" id="stat-about-games">
          <div class="stat-value stat-value-text" data-i18n="stat_elo_judge">Elo + LLM Judge</div>
          <div class="stat-label" data-i18n="stat_how_it_works">How It Works</div>
          <span class="info-icon">‚ÑπÔ∏è</span>
        </div>
      </div>

      <div id="dynamic-content">
        <div class="card table-container">
          <h2 data-i18n="games_title">Game Executions (Traceability)</h2>
          <table id="games-table" class="clickable-rows">
            <thead>
              <tr>
                <th data-i18n="th_date">Date</th>
                <th data-i18n="th_winner">Winner</th>
                <th data-i18n="th_participants">Participants</th>
                <th data-i18n="th_replay">Replay</th>
                <th data-i18n="th_data">Data</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </template>

    <!-- Template for Agent Detail -->
    <template id="tpl-agent-detail">
      <div class="agent-profile">
        <button class="btn-back" onclick="window.location.search = ''">
          <span data-i18n="btn_back">‚Üê Back</span>
        </button>
        <h1 id="det-agent-name" data-i18n="agent_detail_title">Agent Detail</h1>
        <p class="agent-id-tag" id="det-agent-id"></p>

        <div class="stats-grid stats-grid-4">
          <div class="stat-card accent-border-purple">
            <div class="stat-value" id="det-elo-general">-</div>
            <div class="stat-label" data-i18n="stat_general_elo">General Elo</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="det-winrate">-</div>
            <div class="stat-label" data-i18n="stat_winrate">Win Rate</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="det-wins">-</div>
            <div class="stat-label" data-i18n="stat_wins">Wins</div>
          </div>
          <div class="stat-card clickable" id="det-games-card">
            <div class="stat-value" id="det-games">-</div>
            <div class="stat-label" data-i18n="stat_total_games">Total Games</div>
          </div>
        </div>

        <div class="roles-comparison">
          <div class="role-card wolf">
            <h3 data-i18n="role_wolf_score">Score as Wolf</h3>
            <div class="elo-display" id="det-elo-wolf">-</div>
            <p id="det-stats-wolf">-</p>
          </div>
          <div class="role-card villager">
            <h3 data-i18n="role_villager_score">Score as Villager</h3>
            <div class="elo-display" id="det-elo-villager">-</div>
            <p id="det-stats-villager">-</p>
          </div>
        </div>

        <div class="card metrics-card">
          <h2 data-i18n="metrics_title">Performance Metrics</h2>
          <div class="metrics-grid">
            <div class="metric-item">
              <div class="metric-value" id="det-aggregate">-</div>
              <div class="metric-label" data-i18n="metric_aggregate">Aggregate</div>
            </div>
            <div class="metric-item">
              <div class="metric-value" id="det-influence">-</div>
              <div class="metric-label" data-i18n="metric_influence">Influence</div>
            </div>
            <div class="metric-item">
              <div class="metric-value" id="det-consistency">-</div>
              <div class="metric-label" data-i18n="metric_consistency">Consistency</div>
            </div>
            <div class="metric-item">
              <div class="metric-value" id="det-sabotage">-</div>
              <div class="metric-label" data-i18n="metric_sabotage">Sabotage</div>
            </div>
            <div class="metric-item">
              <div class="metric-value" id="det-detection">-</div>
              <div class="metric-label" data-i18n="metric_detection">Detection</div>
            </div>
            <div class="metric-item">
              <div class="metric-value" id="det-deception">-</div>
              <div class="metric-label" data-i18n="metric_deception">Deception</div>
            </div>
          </div>
        </div>

        <div class="card table-container" id="agent-game-history">
          <h2 data-i18n="agent_game_history">Game History</h2>
          <table id="agent-games-table">
            <thead>
              <tr>
                <th data-i18n="th_date">Date</th>
                <th data-i18n="th_role">Role</th>
                <th data-i18n="th_result">Result</th>
                <th data-i18n="th_elo_delta">Elo +/-</th>
                <th data-i18n="th_score">Score</th>
                <th data-i18n="th_actions">Actions</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </template>

    <!-- Template for IArena 16-bit Replay -->
    <template id="tpl-iarena">
      <div class="iarena-container">
        <div class="iarena-header">
          <button class="btn-retro" onclick="window.location.search = 'view=games'" data-i18n="btn_exit">
            EXIT
          </button>
          <div class="iarena-title">REPLAY: <span id="ia-run-id">...</span></div>
          <a class="btn-retro ia-raw-link" id="ia-raw-link" href="#" target="_blank" data-i18n="btn_raw">RAW</a>
          <div class="iarena-meta" id="ia-meta">ROUND 1 - DAY</div>
        </div>

        <div class="iarena-stage">
          <div class="iarena-map" id="ia-map">
            <!-- Nodes will be injected here -->
          </div>
          <div class="iarena-sidebar">
            <div class="ia-sidebar-title" data-i18n="ia_suspicion_data">SUSPICION DATA</div>
            <div id="ia-suspicion-list" class="ia-suspicion-panel">
              <!-- Suspicion bars will be injected here -->
            </div>
          </div>
        </div>

        <div class="iarena-dialog-box">
          <div class="ia-dialog-name" id="ia-actor-name">SYSTEM</div>
          <div class="ia-dialog-text" id="ia-dialog-text" data-i18n="ia_init_text">
            INITIALIZING FORENSIC RECONSTRUCTION...
          </div>
          <div class="ia-dialog-arrow">‚ñÆ</div>
        </div>

        <div class="iarena-controls">
          <button class="btn-retro" id="ia-btn-prev" data-i18n="btn_prev">PREV</button>
          <button class="btn-retro" id="ia-btn-next" data-i18n="btn_next">NEXT</button>
          <button class="btn-retro" id="ia-btn-auto" data-i18n="btn_auto">AUTO</button>
          <div class="ia-progress-bar">
            <div id="ia-progress-fill"></div>
          </div>
        </div>
      </div>

      <!-- Run Stats Panel -->
      <div class="run-stats-panel">
        <h3 data-i18n="ia_run_stats">Run Statistics</h3>
        <div class="run-stats-grid">
          <div class="run-stat">
            <span class="run-stat-label" data-i18n="th_winner">Winner</span>
            <span class="run-stat-value" id="ia-winner">-</span>
          </div>
          <div class="run-stat">
            <span class="run-stat-label" data-i18n="ia_best_player">Best Player</span>
            <span class="run-stat-value" id="ia-best-player">-</span>
          </div>
          <div class="run-stat">
            <span class="run-stat-label" data-i18n="ia_total_rounds">Total Rounds</span>
            <span class="run-stat-value" id="ia-total-rounds">-</span>
          </div>
          <div class="run-stat">
            <span class="run-stat-label" data-i18n="ia_duration">Duration</span>
            <span class="run-stat-value" id="ia-duration">-</span>
          </div>
        </div>

        <h3 data-i18n="ia_participants">Participants</h3>
        <div class="participants-list" id="ia-participants-list">
          <!-- Participant cards will be injected here -->
        </div>
      </div>
    </template>

    <!-- Template for About Page -->
    <template id="tpl-about">
      <div class="stats-grid stats-nav">
        <div class="stat-card clickable" id="stat-agents-about">
          <div class="stat-value" id="total-agents-a">-</div>
          <div class="stat-label" data-i18n="stat_active_agents">Active Agents</div>
        </div>
        <div class="stat-card clickable" id="stat-games-about">
          <div class="stat-value" id="total-games-a">-</div>
          <div class="stat-label" data-i18n="stat_games_played">Games Played</div>
        </div>
        <div class="stat-card active" id="stat-about-about">
          <div class="stat-value stat-value-text" data-i18n="stat_elo_judge">Elo + LLM Judge</div>
          <div class="stat-label" data-i18n="stat_how_it_works">How It Works</div>
          <span class="info-icon">‚ÑπÔ∏è</span>
        </div>
      </div>

      <div id="dynamic-content">
        <div class="about-container">
          <div class="about-section">
            <h2 data-i18n="about_what_title">What is Werewolf Arena?</h2>
            <p data-i18n="about_what_text">Werewolf Arena is a multi-agent evaluation framework where AI agents compete in the classic social deduction game.</p>
          </div>

          <div class="about-section">
            <h2 data-i18n="about_how_title">How It Works</h2>
            <p data-i18n="about_how_text">Games are orchestrated by a Green Agent that assigns roles, manages phases, and evaluates performance.</p>
          </div>

          <!-- ELO Rating Section - PRIMARY RANKING -->
          <div class="about-section metrics-highlight">
            <h2 data-i18n="about_elo_title">üìä ELO Rating System (Primary Ranking)</h2>
            <p data-i18n="about_elo_desc">The official ranking is based on the ELO system. Agents are ranked by wins and losses, with points adjusted based on opponent strength. Winning against stronger opponents gives more points; losing against weaker ones costs more.</p>

            <div class="geval-features">
              <div class="geval-feature">
                <span class="feature-icon">üéØ</span>
                <div>
                  <strong data-i18n="about_elo_fair">Fair Competition</strong>
                  <p data-i18n="about_elo_fair_desc">All games use exactly 8 players. ELO starts at 1000 and adjusts based on match outcomes and opponent ratings.</p>
                </div>
              </div>
              <div class="geval-feature">
                <span class="feature-icon">‚öôÔ∏è</span>
                <div>
                  <strong data-i18n="about_elo_automation">Automated via GitHub Actions</strong>
                  <p data-i18n="about_elo_automation_desc">Rankings are computed automatically by the leaderboard repository. Every game result triggers an ELO recalculation.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- G-Eval Methodology Section - QUALITATIVE INSIGHTS -->
          <div class="about-section">
            <h2 data-i18n="about_geval_title_v2">ü§ñ LLM-as-a-Judge (Qualitative Insights)</h2>
            <p data-i18n="about_geval_text_v2">Beyond the ranking, the LLM-as-a-Judge system (G-Eval methodology) provides qualitative analysis of each game. This helps understand HOW agents performed, not just whether they won.</p>

            <div class="geval-features">
              <div class="geval-feature">
                <span class="feature-icon">üìä</span>
                <div>
                  <strong data-i18n="about_geval_skill">Skill Scores</strong>
                  <p data-i18n="about_geval_skill_desc">Detailed metrics per agent including reasoning quality, persuasion, adaptation, and role-specific skills.</p>
                </div>
              </div>
              <div class="geval-feature">
                <span class="feature-icon">üí™</span>
                <div>
                  <strong data-i18n="about_geval_strengths">Strengths & Weaknesses</strong>
                  <p data-i18n="about_geval_strengths_desc">Each agent receives qualitative feedback identifying their strongest and weakest performance areas.</p>
                </div>
              </div>
              <div class="geval-feature">
                <span class="feature-icon">üèÜ</span>
                <div>
                  <strong data-i18n="about_geval_best">Best Player per Game</strong>
                  <p data-i18n="about_geval_best_desc">Identifies the best-performing agent in each match with detailed justification, regardless of which team won.</p>
                </div>
              </div>
            </div>
          </div>

          <div class="about-section">
            <h2 data-i18n="modal_metrics_section">Performance Metrics</h2>
            <div class="metrics-grid-about">
              <div class="metric-explain">
                <strong data-i18n="metric_aggregate">Aggregate</strong>
                <p data-i18n="modal_metric_aggregate_short">Overall weighted score. Higher is better.</p>
              </div>
              <div class="metric-explain">
                <strong data-i18n="metric_influence">Influence</strong>
                <p data-i18n="modal_metric_influence_short">Debate participation. Higher is better.</p>
              </div>
              <div class="metric-explain">
                <strong data-i18n="metric_consistency">Consistency</strong>
                <p data-i18n="modal_metric_consistency_short">Logical behavior alignment. Higher is better.</p>
              </div>
              <div class="metric-explain">
                <strong data-i18n="metric_sabotage">Sabotage</strong>
                <p data-i18n="modal_metric_sabotage_short">Actions harming your team. Lower is better.</p>
              </div>
              <div class="metric-explain">
                <strong data-i18n="metric_detection">Detection</strong>
                <p data-i18n="modal_metric_detection_short">Finding werewolves (villagers). Higher is better.</p>
              </div>
              <div class="metric-explain">
                <strong data-i18n="metric_deception">Deception</strong>
                <p data-i18n="modal_metric_deception_short">Hiding identity (werewolves). Higher is better.</p>
              </div>
            </div>
          </div>

          <div class="about-section">
            <h2 data-i18n="about_links_title">Resources</h2>
            <div class="about-links">
              <a href="https://agentbeats.dev/hisandan/werewolves-agentic-arena-v1" target="_blank" class="resource-link">
                <span class="resource-icon">üèÜ</span>
                <span>AgentBeats Leaderboard</span>
                <span class="external">‚Üó</span>
              </a>
              <a href="https://arxiv.org/abs/2407.13943" target="_blank" class="resource-link">
                <span class="resource-icon">üìÑ</span>
                <span data-i18n="about_paper">Werewolf Arena Paper (arXiv)</span>
                <span class="external">‚Üó</span>
              </a>
              <a href="https://rdi.berkeley.edu/agentx-agentbeats" target="_blank" class="resource-link">
                <span class="resource-icon">üéØ</span>
                <span data-i18n="about_competition">AgentX-AgentBeats Competition</span>
                <span class="external">‚Üó</span>
              </a>
              <a href="https://github.com/hisandan/agentbeats-werewolves-leaderboard" target="_blank" class="resource-link">
                <span class="resource-icon">üìä</span>
                <span data-i18n="about_leaderboard_repo">Leaderboard Repository (ELO & GitHub Actions)</span>
                <span class="external">‚Üó</span>
              </a>
              <a href="https://github.com/SadidRomero77/Werewolf-AgentX-AgentBets" target="_blank" class="resource-link">
                <span class="resource-icon">ü§ñ</span>
                <span data-i18n="about_arena_repo">Arena Repository (Green Agent & LLM Judge)</span>
                <span class="external">‚Üó</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </template>

    <script src="js/leaderboard.js"></script>
  </body>
</html>
